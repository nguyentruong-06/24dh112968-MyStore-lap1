@{
    var Cart = Session["Cart"] as _24dh112968_MyStore_lap1.Models.ViewModle.Cart;

    ViewBag.pmmodel = new _24dh112968_MyStore_lap1.Models.ViewModle.PersonalMenuVM
    {
        IsLoggedIn = User?.Identity?.IsAuthenticated ?? false,
        UserName = User?.Identity?.IsAuthenticated == true ? User.Identity.Name : string.Empty,
        CartCount = (Cart != null && Cart.Items.Any()) ? Cart.Items.Count() : 0
      
    };
}


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewBag.Title - My Store</title>

    @* CÁC THƯ VIỆN CSS (Styles.Render chứa Bootstrap và CSS Tự định nghĩa) *@
    @Styles.Render("~/Content/css")

    @* Thư viện Font Awesome  *@
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" /> 
    @Scripts.Render("~/bundles/modernizr")
    @*Layout-css*@
    <link rel="stylesheet" type="text/css" href="~/Content/_Layout.css" />
    @*Front Awesome*@


</head>
<body>
    @* KHỐI QUẢNG CÁO HEADER TOP (Nên dùng class CSS thay cho inline style) *@
    <header class="container promotion-bar" style="background-color:Lightgreen;">
        <h4 style="text-align:center; color:green;">
            Free ship đơn từ 40k, giảm nhiều hơn cùng
            <span style="font-weight:bolder; font-style:italic;"><span style="color:blue;">FREESHIP</span> XTRA</span>
        </h4>
    </header>

    @* THANH NAVBAR CỐ ĐỊNH (Sử dụng cấu trúc Bootstrap chuẩn) *@
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <!-- Nút Toggle cho mobile -->
                @*<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>*@
                <!-- Logo -->
                <a href="@Url.Action("Index", "Home")" class="navbar-brand">
                    <img src="https://www.vectortemplates.com/images/store-logo/fastor-theme-discount-code.png"
                         alt="Logo My Store" style="max-height:40px;" />
                </a>
            </div>

            <div class="navbar-collapse collapse navbar-right">
                <ul class="nav navbar-nav">
                    <li>
                        <a style="position: relative;" href="@Html.ActionLink("Trang chủ", "Index", "Home")">
                            <i class="fas fa-home"></i>
                        </a>
                    </li>
                    <li class="dropdown">
                        <a style="position: relative;" class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fas fa-user"></i>
                            <span class="d-none d-sm-inline" id="Account-name">
                                @if (ViewBag.pmmodel.IsLoggedIn)
                                {
                                    <text>Hello, </text>
                                    <text>@ViewBag.pmmodel.UserName</text>
                                }
                                else
                                {
                                    <text>Tài khoản</text>
                                }
                            </span>
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            @if (ViewBag.pmmodel.IsLoggedIn)
                            {
                                <li><a href="@Url.Action("Profile", "Account")">Thông tin tài khoản</a></li>
                                <li><a href="@Url.Action("OrderHistory", "Order")">Lịch sử mua hàng</a></li>
                                <li><a href="@Url.Action("Logout", "Account")">Đăng xuất</a></li>
                            }
                            else
                            {
                                <li><a href="@Url.Action("Register", "Account")">Đăng ký</a></li>
                                <li><a href="@Url.Action("Login", "Account")">Đăng nhập</a></li>
                            }
                        </ul>
                    </li>
                    <li>
                        <a href="@Url.Action("Index2", "Cart")">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="d-none d-sm-inline">Giỏ hàng</span>
                            <span id="cart-count">@ViewBag.pmmodel.CartCount</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


    @* KHỐI NỘI DUNG CHÍNH *@
    <div class="container body-content" style="padding-top: 70px;">
        @* Thêm padding-top để nội dung không bị Navbar che *@
        @* Có thể hiển thị thông báo ở đây: @Html.Partial("_Notification") *@
        @RenderBody()
        <hr />

        @* KHỐI FOOTER *@
        <footer>
            <p>&copy; @DateTime.Now.Year - My Store | Hotline: 1900 6789</p>

        </footer>
    </div>

    @* CÁC THƯ VIỆN JAVASCRIPT BẮT BUỘC PHẢI ĐẶT Ở CUỐI TRƯỚC THẺ </body> *@
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")

    @* Cho phép các View con chèn script riêng (ví dụ: script Ajax mua hàng) *@
    @RenderSection("scripts", required: false)
</body>
</html>