@model _24dh112968_MyStore_lap1.Models.ViewModle.ProductSearchVM
@using PagedList.Mvc
@{
    ViewBag.Title = "Quản lý sản phẩm";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<div class="container mt-4">

    <!-- Tiêu đề chính -->
    <h2 class="bg-success text-white p-3 rounded text-center">
        QUẢN LÝ & TÌM KIẾM SẢN PHẨM
    </h2>

    <!-- Khu vực tìm kiếm -->
    @using (Html.BeginForm("Index", "Products", FormMethod.Get))
    {
        <div class="row justify-content-center mt-4">
            <div class="col-md-8">
                <div class="input-group shadow-sm">
                    @Html.TextBoxFor(model => model.SearchTerm,
                        new
                        {
                            @class = "form-control",
                            placeholder = "Nhập tên, mô tả hoặc danh mục sản phẩm...",
                            style = "border-radius: 8px 0 0 8px;"
                        })
                    @*bổ sung thêm trường tìm kiếm theo khoảng giá*@
                    @Html.TextBoxFor(m => m.MinPrice, new
                    {
                        @class = "form-control",
                        placeholder = "Nhập giá tối thiểu",
                        type = "number"
                    })

                    @Html.TextBoxFor(m => m.MaxPrice, new
                    {
                        @class = "form-control",
                        placeholder = "Nhập giá tối đa",
                        type = "number"
                    })


                    <button class="btn btn-primary px-4" type="submit" style="border-radius: 0 8px 8px 0;">
                        Tìm kiếm
                    </button>
                </div>
                <div class="form-group order-container d-flex align-items-center justify-content-center mt-3 mb-3">
                    Sắp xếp:
                    @Html.ActionLink("Tên tăng dần", "Index", new { sortOrder = "name_asc", searchTerm = Model.SearchTerm, minPrice = Model.MinPrice, maxPrice = Model.MaxPrice }) |
                    @Html.ActionLink("Tên giảm dần", "Index", new { sortOrder = "name_desc", searchTerm = Model.SearchTerm, minPrice = Model.MinPrice, maxPrice = Model.MaxPrice }) |
                    @Html.ActionLink("Giá tăng dần", "Index", new { sortOrder = "price_asc", searchTerm = Model.SearchTerm, minPrice = Model.MinPrice, maxPrice = Model.MaxPrice }) |
                    @Html.ActionLink("Giá giảm dần", "Index", new { sortOrder = "price_desc", searchTerm = Model.SearchTerm, minPrice = Model.MinPrice, maxPrice = Model.MaxPrice })
                </div>
            </div>
        </div>
    }

    <!-- Nút thêm  -->
    <div class="text-end mt-3">
        @Html.ActionLink("Thêm sản phẩm mới", "Create", null, new { @class = "btn btn-success px-3" })
    </div>

    <!-- Danh sách sản phẩm -->
    <div class="mt-4">
        <h4 class="bg-info text-white p-3 rounded">
            DANH SÁCH SẢN PHẨM
        </h4>

        <!-- Partial View hiển thị danh sách -->
        @Html.Partial("PVlistProduct", Model)
    </div>
</div>
